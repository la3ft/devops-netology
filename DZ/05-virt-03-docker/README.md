
# Домашнее задание к занятию "5.3. Введение. Экосистема. Архитектура. Жизненный цикл Docker контейнера"

## Задача 1

Сценарий выполения задачи:

- создайте свой репозиторий на https://hub.docker.com;
- выберете любой образ, который содержит веб-сервер Nginx;
- создайте свой fork образа;
- реализуйте функциональность:
запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>
```
Опубликуйте созданный форк в своем репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

### Ответ:
docker pull la3ft/nginx:1.1  
https://hub.docker.com/r/la3ft/nginx/tags  


## Задача 2

Посмотрите на сценарий ниже и ответьте на вопрос:
"Подходит ли в этом сценарии использование Docker контейнеров или лучше подойдет виртуальная машина, физическая машина? Может быть возможны разные варианты?"

Детально опишите и обоснуйте свой выбор.

--

Сценарий:

- Высоконагруженное монолитное java веб-приложение;
- Nodejs веб-приложение;
- Мобильное приложение c версиями для Android и iOS;
- Шина данных на базе Apache Kafka;
- Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;
- Мониторинг-стек на базе Prometheus и Grafana;
- MongoDB, как основное хранилище данных для java-приложения;
- Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry.

### Ответ:
- Высоконагруженное монолитное java веб-приложение - Лучше использовать ВМ или физические сервера, так как предполагается высокая нагрузка;
- Nodejs веб-приложение - Подойдёт docker для изолированного окружения приложения, скорость разворачивания будет большим плюсом;
- Мобильное приложение c версиями для Android и iOS - Можно использовать docker, для каждой версии свой образ;
- Шина данных на базе Apache Kafka - В таком случае лучше ВМ, так как нужна отказаустойчивость для посылаемых сообщений;
- Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana - Для elasticsearch и kibana можно использовать docker, а вот для logstash ВМ, так как там будут хранится данные;
- Мониторинг-стек на базе Prometheus и Grafana - Так как данных мониторинг хранить не предполагает то можно использовать docker, это также ускорит разворачивание среды в последующем;
- MongoDB, как основное хранилище данных для java-приложения - Так как используется БД(хранение данных) то лучше использовать ВМ;
- Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry - Если не подразумевается использовать в Gitlab хранение git репозиториев разработки то можно использовать docker, если же репозиториии будут то лучше ВМ.


## Задача 3

- Запустите первый контейнер из образа ***centos*** c любым тэгом в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;
- Запустите второй контейнер из образа ***debian*** в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;
- Подключитесь к первому контейнеру с помощью ```docker exec``` и создайте текстовый файл любого содержания в ```/data```;
- Добавьте еще один файл в папку ```/data``` на хостовой машине;
- Подключитесь во второй контейнер и отобразите листинг и содержание файлов в ```/data``` контейнера.

### Ответ:
```

root@vagrant:/home/vagrant# docker run -v /data:/data --name centos_1 -td centos /bin/bash
4c32aee73c8a60e00887862001c58976f1c5d5c70fb76c25173c141dca386773
root@vagrant:/home/vagrant# docker run -v /data:/data --name debian_2 -td debian /bin/bash
258d77889e8ce1f93537b43e7c76a4d4b502b66ad30fc5e76c26795145fb31eb
root@vagrant:/home/vagrant# docker exec -it centos_1 bash
[root@4c32aee73c8a /]# cd data/
[root@4c32aee73c8a data]# vi 123.txt
[root@4c32aee73c8a data]# exit
root@vagrant:/home/vagrant# vim /data/host123.txt
root@vagrant:/home/vagrant# docker ps
CONTAINER ID   IMAGE     COMMAND       CREATED              STATUS              PORTS     NAMES
258d77889e8c   debian    "/bin/bash"   About a minute ago   Up About a minute
    debian_2
4c32aee73c8a   centos    "/bin/bash"   2 minutes ago        Up 2 minutes
    centos_1
root@vagrant:/home/vagrant# docker exec -it debian_2 bash
```
123.txt - создан в контейнере образа centos;  
host123.txt - создан в самом хосте
```
root@258d77889e8c:/# ls -l /data/
total 8
-rw-r--r-- 1 root root 4 Apr 23 19:07 123.txt
-rw-r--r-- 1 root root 6 Apr 23 19:08 host123.txt
```
