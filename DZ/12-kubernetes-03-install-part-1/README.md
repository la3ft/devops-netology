# Домашнее задание к занятию "12.3 Развертывание кластера на собственных серверах, лекция 1"
Поработав с персональным кластером, можно заняться проектами. Вам пришла задача подготовить кластер под новый проект.

## Задание 1: Описать требования к кластеру
Сначала проекту необходимо определить требуемые ресурсы. Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

* База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Кэш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий.
* Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

## Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

План расчета
1. Сначала сделайте расчет всех необходимых ресурсов.
2. Затем прикиньте количество рабочих нод, которые справятся с такой нагрузкой.
3. Добавьте к полученным цифрам запас, который учитывает выход из строя как минимум одной ноды.
4. Добавьте служебные ресурсы к нодам. Помните, что для разных типов нод требовния к ресурсам разные.
5. Рассчитайте итоговые цифры.
6. В результате должно быть указано количество нод и их параметры.

## Ответ:  
Расчет
|  | Количество реплик |  ОЗУ, Мб | Ядра, шт | ОЗУ на сервис, Мб | Ядер на сервис, шт |
|:---:|:---:|:---:|:---:|:---:|:---:|
| Фронтэнд              | 5  | 50   | 0,2 | 250   | 1  |
| Бэкэнд                | 10 | 500  | 1   | 6000  | 10 |
| БД                    | 3  | 4096 | 1   | 12288 | 3  |
| Кэш                   | 4  | 4096 | 1   | 16384 | 4  |
| Control node          | 1  | 2048 | 2   | 2048  | 2  |
| Worker-node pods      | 3  | 1024 | 1   | 3072  | 3  |
| Итого                 |    |      |     | 40042 | 23 |

Из данных расчётов нам понадобится как минимум 4 ноды. Control node выносится отдельно:

| Node 1 (Worker) | Количество реплик |  ОЗУ, Мб | Ядра, шт | ОЗУ на сервис, Мб | Ядер на сервис, шт |
|:---:|:---:|:---:|:---:|:---:|:---:|
| Фронтэнд              | 0  | 50   | 0,2 | 0     | 0 |
| Бэкэнд                | 4  | 500  | 1   | 2400  | 4 |
| БД                    | 1  | 4096 | 1   | 4096  | 1 |
| Кэш                   | 2  | 4096 | 1   | 8192  | 2 |
| Worker-node pods      | 1  | 1024 | 1   | 1024  | 1 |
| Итого                 |    |      |     | 15712 | 8 |

| Node 2 (Worker) | Количество реплик |  ОЗУ, Мб | Ядра, шт | ОЗУ на сервис, Мб | Ядер на сервис, шт |
|:---:|:---:|:---:|:---:|:---:|:---:|
| Фронтэнд              | 3  | 50   | 0,2 | 150   | 0,6 |
| Бэкэнд                | 3  | 500  | 1   | 1800  | 3   |
| БД                    | 1  | 4096 | 1   | 4096  | 1   |
| Кэш                   | 2  | 4096 | 1   | 8192  | 2   |
| Worker-node pods      | 1  | 1024 | 1   | 1024  | 1   |
| Итого                 |    |      |     | 15262 | 8 (7,6) |

| Node 3 (Worker) | Количество реплик |  ОЗУ, Мб | Ядра, шт | ОЗУ на сервис, Мб | Ядер на сервис, шт |
|:---:|:---:|:---:|:---:|:---:|:---:|
| Фронтэнд              | 2  | 50   | 0,2 | 100   | 0,4 |
| Бэкэнд                | 3  | 500  | 1   | 1800  | 3   |
| БД                    | 1  | 4096 | 1   | 4096  | 1   |
| Кэш                   | 2  | 4096 | 1   | 8192  | 2   |
| Worker-node pods      | 1  | 1024 | 1   | 1024  | 1   |
| Итого                 |    |      |     | 15212 | 8 (7,4) |

| Node 4 (Control) | Количество реплик |  ОЗУ, Мб | Ядра, шт | ОЗУ на сервис, Мб | Ядер на сервис, шт |
|:---:|:---:|:---:|:---:|:---:|:---:|
| Control-node          | 1  | 2048 | 2   | 2048 | 2 |
| Итого                 |    |      |     | 2048 | 2 |
